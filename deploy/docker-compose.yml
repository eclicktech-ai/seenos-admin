# SeenOS Admin Dashboard - Standalone Docker Compose
#
# 单独部署 Admin Dashboard，后端运行在本机
#
# 使用方法:
#   cd deploy
#   docker-compose up -d          # 后台启动
#   docker-compose up --build     # 重新构建
#   docker-compose logs -f        # 查看日志
#   docker-compose down           # 停止
#
# 访问: http://localhost:3001
# 
# 前提: 后端已在本机 http://localhost:8000 运行

services:
  admin:
    container_name: seenos_admin
    build:
      context: ..
      dockerfile: deploy/Dockerfile
    ports:
      - "3001:80"
    volumes:
      # 使用 standalone 配置连接到本机后端
      - ./nginx.conf:/etc/nginx/conf.d/default.conf:ro
    # Mac/Windows Docker Desktop 自动支持 host.docker.internal
    # Linux 需要添加此配置:
    extra_hosts:
      - "host.docker.internal:host-gateway"
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:80/health"]
      interval: 30s
      timeout: 10s
      retries: 3

